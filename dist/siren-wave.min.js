/*!
 * siren-wave v0.0.2
 * (c) 2017 miaowing
 * Released under the MIT License.
 */
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.Siren=i()}(this,function(){"use strict";function t(t,i){for(var e=Object.keys(i),s=e.length;s--;)t[e[s]]=i[e[s]];return t}var i=function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),s=function(){function t(){i(this,t)}return e(t,null,[{key:"getOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i={};return i.params=t,i.target=t.target,i.width=t.width,i.height=t.height,i.bgColor=t.bgColor?t.bgColor:"white",i.waves=t.waves||[],i.color=t.color?t.color:"#7cd5f4",i.callback=t.callback,i}}]),t}(),n=function(){function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,s),this.xPos=0,this.yPos=0,this.yEnd=t.yEnd||0,this.xEnd=t.xEnd||0,this.xStep=1,this.angleStep=t.angleStep||.01,this.angle=0,this.alpha=t.alpha?t.alpha:1,this.peak=t.peak?t.peak:18,this.yOffset=t.yOffset?t.yOffset:0,this.speed=t.speed?t.speed:.06,this.count=Math.PI/2,this.isPositive=t.isPositive||!0}return e(s,[{key:"getAngle",value:function(){return this.count+=this.speed,this.count}},{key:"dist",value:function(t,i,e,s){return e=e?e:0,s=s?s:0,Math.sqrt(Math.pow(t-e,2)+Math.pow(i-s,2))}},{key:"render",value:function(t){for(t.save(),t.globalAlpha=this.alpha,this.angle=this.getAngle(),this.xPos=-this.xEnd/2,this.yPos=0,t.beginPath();this.xPos<this.xEnd;){var i=this.xPos+this.xStep,e=Math.sin(this.angle)*this.peak+this.yOffset,s=this.isPositive?this.angle-this.angleStep:this.angle+this.angleStep;t.moveTo(this.xPos-.5,this.yPos),t.lineTo(this.xPos-.5,this.yEnd),this.xPos=i,this.yPos=this.dist(i,e)<this.xEnd?e:this.yEnd*(this.yOffset>0?1:-1),this.angle=s}t.closePath(),t.stroke(),t.restore()}},{key:"update",value:function(i){t(this,i)}}]),s}(),h=function(){function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,h),this.options=s.getOptions(t),this.waveList=[],this.ctx=this.getCanvasContext(),this.timerId=null,this.ctx.strokeStyle=this.options.color,this.ctx.lineWidth=1,this.ctx.translate(this.options.width/2,this.options.height/2),this.createWaves()}return e(h,[{key:"getCanvasContext",value:function(){this.canvas=null;var t=document.getElementById(this.options.target);if(t?(this.canvas=document.createElement("canvas"),this.canvas.setAttribute("height",this.options.height||t.offsetHeight),this.canvas.setAttribute("width",this.options.width||t.offsetWidth),t.appendChild(this.canvas)):this.canvas=document.querySelector("canvas"),!this.canvas)throw new Error("cannot find canvas");return this.canvas.getContext("2d")}},{key:"createWaves",value:function(){var t=this;this.waveList=[],this.waves=this.options.waves,this.waves.forEach(function(i){t.waveList.push(new n({alpha:i.alpha,yOffset:i.yOffset,yEnd:t.options.height,xEnd:t.options.width,speed:i.speed,angleStep:i.angleStep,peak:i.peak,isPositive:i.isPositive}))})}},{key:"update",value:function(i){t(this.options,i),i.height&&this.canvas.setAttribute("height",i.height),i.width&&this.canvas.setAttribute("width",i.width+""),this.ctx.strokeStyle=this.options.color,this.ctx.lineWidth=1,this.ctx.translate(this.options.width/2,this.options.height/2),this.createWaves()}},{key:"draw",value:function(){var t=this;this.ctx.clearRect(-this.options.width/2,-this.options.height/2,this.options.width,this.options.height),this.waveList.forEach(function(i){return i.render(t.ctx)}),cancelAnimationFrame(this.timerId),this.timerId=requestAnimationFrame(this.draw.bind(this))}}]),h}();return h});
//# sourceMappingURL=siren-wave.min.js.map