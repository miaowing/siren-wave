/*!
 * siren-wave v0.0.1
 * (c) 2016 miaowing
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Siren=e()}(this,function(){"use strict";function t(t,e){for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}var e=(function(){function t(t){this.value=t}function e(e){function n(t,e){return new Promise(function(n,s){var a={key:t,arg:e,resolve:n,reject:s,next:null};h?h=h.next=a:(o=h=a,i(t,e))})}function i(n,o){try{var h=e[n](o),a=h.value;a instanceof t?Promise.resolve(a.value).then(function(t){i("next",t)},function(t){i("throw",t)}):s(h.done?"return":"normal",h.value)}catch(t){s("throw",t)}}function s(t,e){switch(t){case"return":o.resolve({value:e,done:!0});break;case"throw":o.reject(e);break;default:o.resolve({value:e,done:!1})}o=o.next,o?i(o.key,o.arg):h=null}var o,h;this._invoke=n,"function"!=typeof e.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)},{wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),i=function(){function t(){e(this,t)}return n(t,null,[{key:"getOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return e.params=t,e.target=t.target,e.width=t.width,e.height=t.height,e.color=t.color?t.color:"#7cd5f4",e.bgColor=t.bgColor?t.bgColor:"white",e.alpha=t.alpha&&t.alpha.length>1?t.alpha:[.4,.2],e.callback=t.callback,e.speed=t.speed?t.speed:1,e}}]),t}(),s=function(){function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,i),this.xPos=0,this.yPos=0,this.yEnd=t.yEnd||0,this.xEnd=t.xEnd||0,this.xStep=1,this.angleStep=.025,this.angle=0,this.alpha=t.alpha?t.alpha:1,this.peak=t.peak?t.peak:18,this.yOffset=t.yOffset?t.yOffset:0,this.speed=t.speed?t.speed:.06,this.count=Math.PI/2}return n(i,[{key:"getAngle",value:function(){return this.count+=this.speed,this.count}},{key:"dist",value:function(t,e,n,i){return n=n?n:0,i=i?i:0,Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))}},{key:"render",value:function(t){for(t.save(),t.globalAlpha=this.alpha,this.angle=this.getAngle(),this.xPos=-this.xEnd/2,this.yPos=0,t.beginPath();this.xPos<this.xEnd;){var e=this.xPos+this.xStep,n=Math.sin(this.angle)*this.peak+this.yOffset,i=this.angle+this.angleStep;t.moveTo(this.xPos-.5,this.yPos),t.lineTo(this.xPos-.5,this.yEnd),this.xPos=e,this.yPos=this.dist(e,n)<this.xEnd?n:this.yEnd*(this.yOffset>0?1:-1),this.angle=i}t.closePath(),t.stroke(),t.restore()}},{key:"update",value:function(e){t(this,e)}}]),i}(),o=function(){function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,o),this.options=i.getOptions(t),this.ctx=this.getCanvasContext(),this.timerId=null,this.ctx.strokeStyle=this.options.color,this.ctx.lineWidth=1,this.ctx.translate(this.options.width/2,this.options.height/2),this.createWaves()}return n(o,[{key:"getCanvasContext",value:function(){this.canvas=null;var t=document.getElementById(this.options.target);if(t?(this.canvas=document.createElement("canvas"),this.canvas.setAttribute("height",this.options.height||t.offsetHeight),this.canvas.setAttribute("width",this.options.width||t.offsetWidth),t.appendChild(this.canvas)):this.canvas=document.querySelector("canvas"),!this.canvas)throw new Error("cannot find canvas");return this.canvas.getContext("2d")}},{key:"createWaves",value:function(){this.waveFront=new s({alpha:this.options.alpha[0],yOffset:0,yEnd:this.options.height,xEnd:this.options.width,speed:.06*this.options.speed}),this.waveBehind=new s({alpha:this.options.alpha[1],yOffset:-4,yEnd:this.options.height,xEnd:this.options.width,speed:.07*this.options.speed})}},{key:"update",value:function(e){t(this.options,e),cancelAnimationFrame(this.timerId),e.height&&this.canvas.setAttribute("height",e.height),e.width&&this.canvas.setAttribute("width",e.width+""),this.ctx.strokeStyle=this.options.color,this.ctx.lineWidth=1,this.ctx.translate(this.options.width/2,this.options.height/2),this.createWaves(),this.draw()}},{key:"draw",value:function(){this.ctx.clearRect(-this.options.width/2,-this.options.height/2,this.options.width,this.options.height),this.waveBehind.render(this.ctx),this.waveFront.render(this.ctx),this.timerId=requestAnimationFrame(this.draw.bind(this))}}]),o}();return o});
//# sourceMappingURL=siren-wave.min.js.map